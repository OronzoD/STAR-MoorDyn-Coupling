# Compiler and linker flags
ifeq ($(OS),Windows_NT)
    LFLAGS = -shared -static-libgcc -static-libstdc++ -DMoorDyn_EXPORTS -DWIN32
    CFLAGS = -c -O3 -g -w -Wall -static -static-libgcc -static-libstdc++ -std=gnu++0x -DWIN32
else
    LFLAGS = -shared -static-libgcc -static-libstdc++ -DMoorDyn_EXPORTS -DLINUX -fPIC
    CFLAGS = -c -O3 -g -w -Wall -static -static-libgcc -static-libstdc++ -std=gnu++0x -DLINUX -fPIC
endif

# MoorDyn object files
MDD = MoorDyn-master/compileSO
MD = ${MDD}/MoorDyn.o ${MDD}/Line.o ${MDD}/Connection.o ${MDD}/Misc.o ${MDD}/kiss_fft.o

# Main target
main:
	@g++ main.c ${MD} -lstdc++ -o main.exe
	@./main.exe

# Compile shared library
comp:
	@g++ -DDOUBLE_PRECISION ${LFLAGS} Coupling/uclib.cpp ${MD} -o test.dll
